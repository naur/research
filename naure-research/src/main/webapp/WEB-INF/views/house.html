$!{extends("/layout.html")}

#macro(title) House #end

#macro(content)

<div class="row">
    <div class="col-md-12">
        <div id="map"></div>
    </div>
</div>


<script type="text/javascript"
        src="http://maps.google.com/maps/api/js?v=3.9&sensor=false&region=zh-CN&language=zh-CN"></script>
<script type="text/javascript" src="http://localhost:10080/js/core/maplabel-compiled.js"></script>
<script type="text/javascript">
    var global = {
        map: null,
        marker: null,
        geocoder: null,
        //经度：114.38484,  维度：30.478435
        // 北京：39.904214, 116.40741300000002);
        center: [13.72789, 100.52412],
        points: [
            {point: [13.74998, 100.49199], name: '大皇宫'}
        ]
    };

    function loadPoint() {
        for (var index in global.points) {
            global.points[index].point = new google.maps.LatLng(global.points[index].point[0], global.points[index].point[1]);
        }
        global.center = new google.maps.LatLng(global.center[0], global.center[1]);

        global.map = new google.maps.Map(
                document.getElementById("map"), {
                    zoom: 14,
                    center: global.center,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                }
        );

        //google.maps.Marker
        for (var index in global.points) {
            var mapLabel = new MapLabel({
                text: global.points[index].name,
                map: global.map,
                position: global.points[index].point,
                fontSize: 18,
                align: 'right',
                title: '您当前所在的位置\r\n经度：' + global.points[index].point.lng() + '\r\n维度： ' + global.points[index].point.lat()
            });
            var marker = new google.maps.Marker;
            marker.bindTo('map', mapLabel);
            marker.bindTo('position', mapLabel);
        }

        global.geocoder = new google.maps.Geocoder();
    }

    google.maps.event.addDomListener(window, 'load', loadPoint);

    function init() {
    }

    //require(['loading', 'research-template', 'google.maps', 'google.maplabel'], function (NAURE) {
    require(['loading', 'research-template'], function (NAURE) {
        $(function () {
        });
    });
</script>


#end
